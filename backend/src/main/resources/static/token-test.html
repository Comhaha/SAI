<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í† í° í…ŒìŠ¤íŠ¸ í˜ì´ì§€</title>
  <style>
    body{font-family:system-ui,sans-serif;max-width:600px;margin:40px auto;padding:0 16px}
    h1{margin-top:0}
    button{padding:8px 18px;margin-right:8px;font-size:15px;cursor:pointer}
    #info{margin-top:20px;border:1px solid #ccc;border-radius:4px;padding:12px;white-space:pre-wrap}
    #info b{color:#0066cc}
  </style>
</head>
<body>
<h1>í˜„ì¬ í† í° í™•ì¸ &middot; ì¬ë°œê¸‰ í…ŒìŠ¤íŠ¸</h1>

<button id="get">í˜„ì¬ í† í° ê°€ì ¸ì˜¤ê¸° (GET)</button>
<button id="reload">ìƒˆ í† í° ì¬ë°œê¸‰ (POST)</button>

<div id="info">ğŸ›ˆ ê²°ê³¼ê°€ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤.</div>

<script>
  const api = location.origin;                         // ë™ì¼ í˜¸ìŠ¤íŠ¸/í¬íŠ¸

  const $ = id => document.getElementById(id);
  const out = msg => $("info").textContent = msg;

  /* ê³µìš© fetch ë˜í¼ */
  async function call(method, url){
    const res = await fetch(api+url, {method});
    if(!res.ok) throw new Error(`HTTP ${res.status}`);
    return res.json();
  }

  /* í˜„ì¬ í† í° ì¡°íšŒ */
  $("get").onclick = async ()=>{
    out("â³ í† í° ì¡°íšŒ ì¤‘â€¦");
    try{
      const j = await call("GET", "/api/token");
      out(`âœ… í˜„ì¬ í† í°:\n\n<b>${j.result.token}</b>`);
    }catch(e){
      out("âŒ ì˜¤ë¥˜: "+e);
    }
  };

  /* í† í° ì¬ë°œê¸‰ */
  $("reload").onclick = async ()=>{
    out("â³ ìƒˆ í† í° ë°œê¸‰ ìš”ì²­ ì¤‘â€¦");
    try{
      const j = await call("POST", "/api/token/reload");
      out(`ğŸ”„ ì¬ë°œê¸‰ ì™„ë£Œ!\n\n<b>${j.result.token}</b>`);
    }catch(e){
      out("âŒ ì˜¤ë¥˜: "+e);
    }
  };
</script>
</body>
</html>
